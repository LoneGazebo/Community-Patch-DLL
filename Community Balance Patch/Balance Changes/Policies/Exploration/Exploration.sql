-- Unlock Time
UPDATE PolicyBranchTypes
SET EraPrereq = 'ERA_RENAISSANCE'
WHERE Type = 'POLICY_BRANCH_EXPLORATION' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- Opener -- Now called Imperialism -- Grants +1 Movement and +1 Sight for Naval Units, and speeds production of land units by +5%, with an additional +4% for every policy unlocked in Imperialism. Receive 1 extra happiness for every owned luxury, and 1 Happiness for every garrisoned unit.


-- Maritime Infrastructure -- Now Martial Law
UPDATE Policies
SET PuppetProdMod = '25'
WHERE Type = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET OccupiedProdMod = '33'
WHERE Type = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

DELETE FROM Policy_CoastalCityYieldChanges
WHERE PolicyType = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET UnitUpgradeCostMod = '-25'
WHERE Type = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET PortraitIndex = '0'
WHERE Type = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET IconAtlas = 'EXPANSIONPATCH_POLICY_ATLAS'
WHERE Type = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET IconAtlasAchieved = 'EXPANSIONPATCH_POLICY_ACHIEVED_ATLAS'
WHERE Type = 'POLICY_MARITIME_INFRASTRUCTURE' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- Merchant Navy -- Now called Exploitation -- +1 Gold and +1 Production from Farms and Plantations
DELETE FROM Policy_BuildingClassYieldChanges
WHERE PolicyType = 'POLICY_MERCHANT_NAVY' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

DELETE FROM Policy_BuildingClassCultureChanges
WHERE PolicyType = 'POLICY_MERCHANT_NAVY' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET UpgradeCSTerritory = '1'
WHERE Type = 'POLICY_MERCHANT_NAVY' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- Naval Tradition -- Military Tradition -- +33% to Great Admiral and Great General Production -- Barracks, Armories and Military Academies provide +1 Science.
DELETE FROM Policy_BuildingClassHappiness
WHERE PolicyType = 'POLICY_NAVAL_TRADITION' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET GreatAdmiralRateModifier = '33'
WHERE Type = 'POLICY_NAVAL_TRADITION' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET GreatGeneralRateModifier = '33'
WHERE Type = 'POLICY_NAVAL_TRADITION' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- Navigation School - Free GA, Improved Embark, and reveals all capitals.
DELETE FROM Policy_FreePromotions
WHERE PolicyType = 'POLICY_NAVIGATION_SCHOOL' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET GreatAdmiralRateModifier = '0'
WHERE Type = 'POLICY_NAVIGATION_SCHOOL' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET EmbarkedExtraMoves = '2'
WHERE Type = 'POLICY_NAVIGATION_SCHOOL' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET RevealAllCapitals = '1'
WHERE Type = 'POLICY_NAVIGATION_SCHOOL' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policy_FreeUnitClasses
SET Count = '1'
WHERE PolicyType = 'POLICY_NAVIGATION_SCHOOL' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policy_FreeUnitClasses
SET UnitClassType = 'UNITCLASS_GREAT_ADMIRAL'
WHERE PolicyType = 'POLICY_NAVIGATION_SCHOOL' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- Treasure Fleets -- Now called Civilizing Mission -- Receive a free Factory, and a lump sum of Gold, when you conquer a city. Garrisons are free.
UPDATE Policies
SET SeaTradeRouteGoldChange = '0'
WHERE Type = 'POLICY_TREASURE_FLEETS' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET FreeBuildingOnConquest = 'BUILDING_FACTORY'
WHERE Type = 'POLICY_TREASURE_FLEETS' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

UPDATE Policies
SET GarrisonFreeMaintenance = '1'
WHERE Type = 'POLICY_TREASURE_FLEETS' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- Finisher
UPDATE Policies
SET IdeologyPoint = '1'
WHERE Type = 'POLICY_EXPLORATION_FINISHER' AND EXISTS (SELECT * FROM COMMUNITY WHERE Type='COMMUNITY_CORE_BALANCE_POLICIES' AND Value= 1 );

-- NEW

INSERT INTO Policy_UnitCombatProductionModifiers
	(PolicyType, UnitCombatType, ProductionModifier)
VALUES
	('POLICY_EXPLORATION', 'UNITCOMBAT_NAVALRANGED', 5),
	('POLICY_EXPLORATION', 'UNITCOMBAT_SUBMARINE', 5),
	('POLICY_EXPLORATION', 'UNITCOMBAT_CARRIER', 5),
	('POLICY_EXPLORATION', 'UNITCOMBAT_NAVALMELEE', 5),
	('POLICY_EXPLORATION', 'UNITCOMBAT_BOMBER', 5),
	('POLICY_EXPLORATION', 'UNITCOMBAT_FIGHTER', 5),
	('POLICY_MARITIME_INFRASTRUCTURE', 'UNITCOMBAT_NAVALRANGED', 4),
	('POLICY_MARITIME_INFRASTRUCTURE', 'UNITCOMBAT_SUBMARINE', 4),
	('POLICY_MARITIME_INFRASTRUCTURE', 'UNITCOMBAT_CARRIER', 4),
	('POLICY_MARITIME_INFRASTRUCTURE', 'UNITCOMBAT_NAVALMELEE', 4),
	('POLICY_MARITIME_INFRASTRUCTURE', 'UNITCOMBAT_BOMBER', 4),
	('POLICY_MARITIME_INFRASTRUCTURE', 'UNITCOMBAT_FIGHTER', 4),
	('POLICY_NAVAL_TRADITION', 'UNITCOMBAT_NAVALRANGED', 4),
	('POLICY_NAVAL_TRADITION', 'UNITCOMBAT_SUBMARINE', 4),
	('POLICY_NAVAL_TRADITION', 'UNITCOMBAT_CARRIER', 4),
	('POLICY_NAVAL_TRADITION', 'UNITCOMBAT_NAVALMELEE', 4),
	('POLICY_NAVAL_TRADITION', 'UNITCOMBAT_BOMBER', 4),
	('POLICY_NAVAL_TRADITION', 'UNITCOMBAT_FIGHTER', 4),
	('POLICY_MERCHANT_NAVY', 'UNITCOMBAT_NAVALRANGED', 4),
	('POLICY_MERCHANT_NAVY', 'UNITCOMBAT_SUBMARINE', 4),
	('POLICY_MERCHANT_NAVY', 'UNITCOMBAT_CARRIER', 4),
	('POLICY_MERCHANT_NAVY', 'UNITCOMBAT_NAVALMELEE', 4),
	('POLICY_MERCHANT_NAVY', 'UNITCOMBAT_BOMBER', 4),
	('POLICY_MERCHANT_NAVY', 'UNITCOMBAT_FIGHTER', 4),
	('POLICY_NAVIGATION_SCHOOL', 'UNITCOMBAT_NAVALRANGED', 4),
	('POLICY_NAVIGATION_SCHOOL', 'UNITCOMBAT_SUBMARINE', 4),
	('POLICY_NAVIGATION_SCHOOL', 'UNITCOMBAT_CARRIER', 4),
	('POLICY_NAVIGATION_SCHOOL', 'UNITCOMBAT_NAVALMELEE', 4),
	('POLICY_NAVIGATION_SCHOOL', 'UNITCOMBAT_BOMBER', 4),
	('POLICY_NAVIGATION_SCHOOL', 'UNITCOMBAT_FIGHTER', 4),
	('POLICY_TREASURE_FLEETS', 'UNITCOMBAT_NAVALRANGED', 4),
	('POLICY_TREASURE_FLEETS', 'UNITCOMBAT_SUBMARINE', 4),
	('POLICY_TREASURE_FLEETS', 'UNITCOMBAT_CARRIER', 4),
	('POLICY_TREASURE_FLEETS', 'UNITCOMBAT_NAVALMELEE', 4),
	('POLICY_TREASURE_FLEETS', 'UNITCOMBAT_BOMBER', 4),
	('POLICY_TREASURE_FLEETS', 'UNITCOMBAT_FIGHTER', 4);

INSERT INTO Policy_ConquerorYield
	(PolicyType, YieldType, Yield)
VALUES
	('POLICY_TREASURE_FLEETS', 'YIELD_GOLD', 100);

INSERT INTO Policy_ImprovementYieldChanges
	(PolicyType, ImprovementType, YieldType, Yield)
VALUES
	('POLICY_MERCHANT_NAVY', 'IMPROVEMENT_FARM', 'YIELD_PRODUCTION', 1),
	('POLICY_MERCHANT_NAVY', 'IMPROVEMENT_FARM', 'YIELD_FOOD', 1),
	('POLICY_MERCHANT_NAVY', 'IMPROVEMENT_PLANTATION', 'YIELD_PRODUCTION', 1),
	('POLICY_MERCHANT_NAVY', 'IMPROVEMENT_PLANTATION', 'YIELD_FOOD', 1);

INSERT INTO Policy_BuildingClassYieldChanges
	(PolicyType, BuildingClassType, YieldType, YieldChange)
VALUES
	('POLICY_NAVAL_TRADITION', 'BUILDINGCLASS_BARRACKS', 'YIELD_SCIENCE', 3),
	('POLICY_NAVAL_TRADITION', 'BUILDINGCLASS_ARMORY', 'YIELD_SCIENCE', 3),
	('POLICY_NAVAL_TRADITION', 'BUILDINGCLASS_MILITARY_ACADEMY', 'YIELD_SCIENCE', 3);

INSERT INTO Policy_BuildingClassCultureChanges
	(PolicyType, BuildingClassType, CultureChange)
VALUES
	('POLICY_NAVAL_TRADITION', 'BUILDINGCLASS_BARRACKS', 1),
	('POLICY_NAVAL_TRADITION', 'BUILDINGCLASS_ARMORY', 1),
	('POLICY_NAVAL_TRADITION', 'BUILDINGCLASS_MILITARY_ACADEMY', 1);

INSERT INTO Policy_PlotYieldChanges
	(PolicyType, PlotType, YieldType, Yield)
VALUES
	('POLICY_EXPLORATION_FINISHER', 'PLOT_OCEAN', 'YIELD_SCIENCE', 1),
	('POLICY_EXPLORATION_FINISHER', 'PLOT_OCEAN', 'YIELD_PRODUCTION', 1);

INSERT INTO UnitPromotions
	(Type, Description, Help, Sound, PortraitIndex, IconAtlas, CannotBeChosen, DefenseMod, PediaType, PediaEntry)
VALUES
	('PROMOTION_NAVAL_DEFENSE_BOOST', 'TXT_KEY_PROMOTION_NAVAL_DEFENSE_BOOST', 'TXT_KEY_PROMOTION_NAVAL_DEFENSE_BOOST_HELP', 'AS2D_IF_LEVELUP', 12, 'EXPANSION2_PROMOTION_ATLAS', 1, 20, 'PEDIA_NAVAL', 'TXT_KEY_PROMOTION_NAVAL_DEFENSE_BOOST');

INSERT INTO UnitPromotions_UnitCombats
	(PromotionType, UnitCombatType)
VALUES
	('PROMOTION_NAVAL_DEFENSE_BOOST', 'UNITCOMBAT_NAVALMELEE'),
	('PROMOTION_NAVAL_DEFENSE_BOOST', 'UNITCOMBAT_NAVALRANGED'),
	('PROMOTION_NAVAL_DEFENSE_BOOST', 'UNITCOMBAT_CARRIER'),
	('PROMOTION_NAVAL_DEFENSE_BOOST', 'UNITCOMBAT_SUBMARINE');

INSERT INTO Policy_FreePromotions
	(PolicyType, PromotionType)
VALUES
	('POLICY_EXPLORATION_FINISHER', 'PROMOTION_AIR_RANGE'),
	('POLICY_EXPLORATION_FINISHER', 'PROMOTION_NAVAL_DEFENSE_BOOST'),
	('POLICY_NAVIGATION_SCHOOL', 'PROMOTION_FASTER_GENERAL');
